/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./api.js":
/*!****************!*\
  !*** ./api.js ***!
  \****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteComments: () => (/* binding */ deleteComments),\n/* harmony export */   fetchGet: () => (/* binding */ fetchGet),\n/* harmony export */   fetchGetAuthoriz: () => (/* binding */ fetchGetAuthoriz),\n/* harmony export */   fetchPost: () => (/* binding */ fetchPost),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   registerUser: () => (/* binding */ registerUser),\n/* harmony export */   toggleLike: () => (/* binding */ toggleLike)\n/* harmony export */ });\n/* harmony import */ var _handlerComments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./handlerComments.js */ \"./handlerComments.js\");\n/* harmony import */ var _handlerLoading_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlerLoading.js */ \"./handlerLoading.js\");\n//Документация к апи: https://github.com/GlebkaF/webdev-hw-api/blob/main/pages/api/v2/%5Bkey%5D/comments/README.md\n\n\n\n\n// import { inputName, inputComment } from \"./variables.js\";\n// import { initialState } from './script.js'; \n// import { inputNameValue, inputCommentValue } from './handlerAddComments.js'\n\n// export let comments = [];\n\nconst baseUrl = \"https://wedev-api.sky.pro/api/v2/julia-matsievich\";\nconst baseUrlApi = 'https://wedev-api.sky.pro/api';\n\n\n// Функция запроса GET НЕавторизованного пользователя\nfunction fetchGet() {\n\treturn fetch(`${baseUrl}/comments`, {\n\tmethod: 'GET',\n})\n.then(response => {\n\tif(response.status === 500) {\n\t\tthrow new Error('Сервер сломался');\n\t}\n\treturn response.json()\n})\n}\n\n\n// Функция запроса GET авторизованного пользователя\nfunction fetchGetAuthoriz(token) {\n\treturn fetch(`${baseUrl}/comments`, {\n\tmethod: 'GET',\n\theaders: {\n\t\tAuthorization: token,\n\t},\n})\n.then(response => {\n\tif(response.status === 500) {\n\t\tthrow new Error('Сервер сломался');\n\t}\n\treturn response.json()\n})\n}\n\n// Функция запроса POST\nconst fetchPost = (newComment, token) => {\n\treturn fetch(`${baseUrl}/comments`, {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(newComment),\n\t\theaders: {\n\t\t\tAuthorization: token,\n\t\t},\n\t})\n\t\t.then(response => {\t\t\t\n\t\t\tif (response.status === 400) {\n\t\t\t\tthrow new Error('Плохой запрос');\n\t\t\t}\n\t\t\tif (response.status === 500) {\n\t\t\t\tthrow new Error('Сервер сломался');\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n}\n\n//Функция запроса на авторизацию\nfunction loginUser( { login, password} ) {\n\treturn fetch(`${baseUrlApi}/user/login`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlogin,\n\t\t\t\t\tpassword\n\t\t\t\t}),\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif (response.status === 400) {\n\t\t\t\t\tthrow new Error('Неверный логин или пароль')\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n}\n\n\n//Функция запроса на удаление комментария\nfunction deleteComments({ token,id }) {\n\treturn fetch(`${baseUrl}/comments/` + id, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAuthorization: token,\n\t\t},\n\t})\n\t\t.then((response) => {\t\t\t\n\t\t\tif (response.status === 500) {\n\t\t\t\tthrow new Error('Сервер сломался');\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n}\n\n//Запрос на регистрацию\nfunction registerUser( { login, password, name} ) {\n\treturn fetch('https://wedev-api.sky.pro/api/user', {\n\t\tmethod: \"POST\",\n\t\tbody: JSON.stringify({\n\t\t\tlogin,\n\t\t\tpassword,\n\t\t\tname\n\t\t})\n\t})\n\t\t.then((response) => {\n\t\t\tif(response.status === 400) {\n\t\t\t\tthrow new Error('Такой пользователь уже существует')\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n}\n\n//Запрос на Переключение лайков\nfunction toggleLike ({ token,id }) {\n\treturn fetch(`${baseUrl}/comments/${id}/toggle-like`, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\tAuthorization: token,\n\t\t},\n\t})\n\t\t.then((response) => {\n\t\t\tif(response.status === 500) {\n\t\t\t\tthrow new Error('Сервер сломался')\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n}\n\n//# sourceURL=webpack://webdev-dom-homework/./api.js?");

/***/ }),

/***/ "./eventlisteners.js":
/*!***************************!*\
  !*** ./eventlisteners.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initAnswerCommentEventListener: () => (/* binding */ initAnswerCommentEventListener),\n/* harmony export */   initDeleteButtonEventListeners: () => (/* binding */ initDeleteButtonEventListeners),\n/* harmony export */   initEditButtonEventListeners: () => (/* binding */ initEditButtonEventListeners),\n/* harmony export */   initLikeButtonEventListeners: () => (/* binding */ initLikeButtonEventListeners)\n/* harmony export */ });\n/* harmony import */ var _variables_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variables.js */ \"./variables.js\");\n/* harmony import */ var _handlerComments_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlerComments.js */ \"./handlerComments.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script.js */ \"./script.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./api.js */ \"./api.js\");\n\n\n\n\n\n// Функция для имитации запросов в API\nfunction delay(interval = 300) {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(() => {\n\t\t\tresolve();\n\t\t}, interval);\n\t});\n}\n\n// Подписка на события кнопки Редактировать\nfunction initEditButtonEventListeners(listComments) {\n\tconst EditButtons = listComments.querySelectorAll('.edit-button');\n\n\tfor (const EditButton of EditButtons) {\n\t\tEditButton.addEventListener('click', (event) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst target = event.target;\n\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderEditComment)(target)\n\t\t})\n\t}\n}\n\n//Подписка на события клика по кнопке Лайк\nfunction initLikeButtonEventListeners(listComments,token) {\n\n\tconst likeButtons = listComments.querySelectorAll('.like-button');\n\n\tfor (const likeButton of likeButtons) {\n\t\tlikeButton.addEventListener('click', (event) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst target = event.target;\n\t\t\tconst commentParrent = target.closest('.comment');\n\t\t\tconst id = commentParrent.dataset.comment;\n\t\t\tconst commentId = _script_js__WEBPACK_IMPORTED_MODULE_2__.comments[id].id;\n\t\t\tlikeButton.classList.add('-loading-like');\n\t\t\t(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.toggleLike)({token,id: commentId})\n\t\t\t.then(result => {\n\t\t\t\t_script_js__WEBPACK_IMPORTED_MODULE_2__.comments[id].likes = result.result.likes;\n\t\t\t\t_script_js__WEBPACK_IMPORTED_MODULE_2__.comments[id].isLiked = result.result.isLiked;\n\t\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderCommentsAuthoriz)(listComments,token);\n\t\t\t})\n\t\t})\n\t}\n}\n\n\n//Подписка на кнопку Удалить комменатрий\nfunction initDeleteButtonEventListeners(listComments,token) {\n\n\tconst deleteButtons = document.querySelectorAll('.delete-button');\n\n\tfor (const deleteButton of deleteButtons) {\n\t\tdeleteButton.addEventListener('click', (event) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst id = deleteButton.dataset.index;\n\t\t\tconst commentId = _script_js__WEBPACK_IMPORTED_MODULE_2__.comments[id].id;\n\t\t\t(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deleteComments)({ token,\n\t\t\t\tid: commentId})\n\t\t\t.then((comments) => {\n\t\t\t\t(0,_script_js__WEBPACK_IMPORTED_MODULE_2__.fetchCommentsAndRenderAuthoriz)(listComments);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (error.message === 'Сервер сломался') {\n\t\t\t\t\t(0,_script_js__WEBPACK_IMPORTED_MODULE_2__.fetchCommentsAndRenderAuthoriz)(listComments);\n\t\t\t\t}\n\t\t\t\tconsole.log(error.message);\n\t\t\t})\n\t\t\t;(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderCommentsAuthoriz)(listComments,token)\n\n\t\t})\n\t}\n}\n\n//Подписка на событие ответить на комментарий\nfunction initAnswerCommentEventListener() {\n\tconst commentElements = document.querySelectorAll('.comment');\n\tconst inputComment = document.querySelector('.add-form-text')\n\n\tfor (const commentElement of commentElements) {\n\t\tcommentElement.addEventListener('click', (event) => {\n\t\t\tconst index = commentElement.dataset.comment;\n\n\t\t\tlet quoteBlock = `/** ${_script_js__WEBPACK_IMPORTED_MODULE_2__.comments[index].name}:\\n${_script_js__WEBPACK_IMPORTED_MODULE_2__.comments[index].text} **/`;\n\n\t\t\tinputComment.value = `${quoteBlock}\\n\\n`;\n\n\t\t\tinputComment.focus();\n\t\t})\n\t}\n}\n\n\n\n//# sourceURL=webpack://webdev-dom-homework/./eventlisteners.js?");

/***/ }),

/***/ "./handlerComments.js":
/*!****************************!*\
  !*** ./handlerComments.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderAddForm: () => (/* binding */ renderAddForm),\n/* harmony export */   renderComments: () => (/* binding */ renderComments),\n/* harmony export */   renderCommentsAuthoriz: () => (/* binding */ renderCommentsAuthoriz),\n/* harmony export */   renderDate: () => (/* binding */ renderDate),\n/* harmony export */   renderEditComment: () => (/* binding */ renderEditComment)\n/* harmony export */ });\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./script.js */ \"./script.js\");\n/* harmony import */ var _handlerLoading_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlerLoading.js */ \"./handlerLoading.js\");\n/* harmony import */ var _eventlisteners_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./eventlisteners.js */ \"./eventlisteners.js\");\n/* harmony import */ var _login_component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./login-component.js */ \"./login-component.js\");\n\n\n\n\n\n\n//Показать ошибку\nfunction showError(element) {\n\tconst divError = document.createElement('div');\n\tdivError.classList.add('error');\n\tdivError.textContent = 'Проверьте введены ли все данные';\n\telement.appendChild(divError);\n}\n\n//Спрятать ошибку\nfunction hideError() {\n\tconst divError = document.querySelector('.error');\n\tif (divError) {\n\t\tdivError.remove();\n\t}\n}\n\n//Проверка на валидность полей ввода\nfunction isValid(name, comment) {\n\tif (name && comment) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\n//Создание даты в нужном формате\nfunction renderDate(dataDate) {\n\tconst date = new Date(dataDate);\n\tconst dateDataArr = date.toLocaleDateString().split('.')\n\tdateDataArr[dateDataArr.length - 1] = dateDataArr[dateDataArr.length - 1].slice(2);\n\tconst dateData = dateDataArr.join('.');\n\n\tconst time = date.toLocaleTimeString().slice(0, -3);\n\n\treturn `${dateData} ${time}`;\n}\n\n\n//Создание формы редактирования комментария\nfunction renderEditComment(element) {\n\tconst parent = element.closest('.comment');\n\tconst commentBody = parent.querySelector('.comment-body');\n\tconst commentText = parent.querySelector('.comment-text');\n\tconst divQuote = commentText.querySelector('.quote');\n\tconst editTextarea = commentText.innerHTML.replaceAll('<div class=\"quote\">', '/**').replaceAll('</div>', '**/');\n\tcommentBody.innerHTML = `\n\t<div class=\"edit-form\">\n\t<textarea type=\"textarea\" class=\"edit-form-text\" rows=\"4\">${editTextarea}</textarea>\n\t<div class=\"add-form-row\">\n\t  <button class=\"edit-form-button\">Сохранить</button>\n\t</div>\n\t</div>\n\t`\n\tconst editForm = parent.querySelector('.edit-form');\n\n\teditForm.addEventListener('click', (event) => {\n\t\tevent.stopImmediatePropagation()\n\t})\n\tconst newCommentText = parent.querySelector('.edit-form-text');\n\tconst editButtonSave = parent.querySelector('.edit-form-button');\n\tconst commentIndex = parent.dataset.comment;\n\n\teditButtonSave.addEventListener('click', (event) => {\n\t\tevent.stopPropagation();\n\t\tif (!newCommentText.value) {\n\t\t\tshowError(commentBody);\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCommentTextValue = newCommentText.value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\").replaceAll(\"/**\", \"<div class='quote'>\").replaceAll(\"**/\", \"</div>\");\n\n\t\tif (divQuote) {\n\t\t\tcommentBody.innerHTML = `<div class=\"comment-text\">${newCommentTextValue}</div>`\n\t\t} else {\n\t\t\tcommentBody.innerHTML = `<div class=\"comment-text\">${newCommentTextValue}</div>`\n\t\t}\n\n\t\t_script_js__WEBPACK_IMPORTED_MODULE_0__.comments[commentIndex].text = newCommentTextValue;\n\t})\n}\n\n\n//Рендер комментариев\nfunction renderComments(listComments) {\n\t\n\tconst commentsHtml = _script_js__WEBPACK_IMPORTED_MODULE_0__.comments.map((comment, index) => {\n\t\tcomment.likeButtonClass = '';\n\n\t\tif (comment.isLiked) {\n\t\t\tcomment.likeButtonClass = '-active-like';\n\t\t}\n\n\t\treturn `\n\t\t\t<li class=\"comment\" data-comment=${index}>\n\t\t\t<div class=\"comment-header\">\n\t\t\t  <div>${comment.name}</div>\n\t\t\t  <div>${comment.date}</div>\n\t\t\t</div>\n\t\t\t<div class=\"comment-body\">\n\t\t\t  <div class=\"comment-text\">${comment.text}</div>\n\t\t\t</div>\n\t\t\t<div class=\"comment-footer\">\n\t\t\t  <div class=\"likes\">\n\t\t\t\t <span class=\"likes-counter\" data-likeCounter = \"${comment.likes}\">${comment.likes}</span>\n\t\t\t\t <button class=\"like-button ${comment.likeButtonClass}\"></button>\n\n\t\t\t  </div>\n\t\t\t</div>\n\t\t </li>`\n\n\t})\n\n\tlistComments.innerHTML = commentsHtml.join('');\n}\n\n\n// Рендер комменатриев для авторизованных пользователей\nfunction renderCommentsAuthoriz(listComments,token) {\n\t\n\tconst commentsHtml = _script_js__WEBPACK_IMPORTED_MODULE_0__.comments.map((comment, index) => {\n\t\tcomment.likeButtonClass = '';\n\n\t\tif (comment.isLiked) {\n\t\t\tcomment.likeButtonClass = '-active-like';\n\t\t}\n\n\t\treturn `\n\t\t\t<li class=\"comment\" data-comment=${index}>\n\t\t\t<div class=\"comment-header\">\n\t\t\t  <div>${comment.name}</div>\n\t\t\t  <div>${comment.date}</div>\n\t\t\t</div>\n\t\t\t<div class=\"comment-body\">\n\t\t\t  <div class=\"comment-text\">${comment.text}</div>\n\t\t\t</div>\n\t\t\t<div class=\"comment-footer\">\n\t\t\t  <div class=\"likes\">\n\t\t\t\t <span class=\"likes-counter\" data-likeCounter = \"${comment.likes}\">${comment.likes}</span>\n\t\t\t\t <button class=\"like-button ${comment.likeButtonClass}\"></button>\n\t\t\t\t <button class=\"edit-button\"></button>\n\t\t\t\t <button class=\"delete-button\" data-index=\"${index}\"></button>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t </li>`\n\n\t})\n\t\n\n\tlistComments.innerHTML = commentsHtml.join('');\n\t\t(0,_eventlisteners_js__WEBPACK_IMPORTED_MODULE_2__.initLikeButtonEventListeners)(listComments,token);\n\t\t(0,_eventlisteners_js__WEBPACK_IMPORTED_MODULE_2__.initEditButtonEventListeners)(listComments);\n\t\t(0,_eventlisteners_js__WEBPACK_IMPORTED_MODULE_2__.initDeleteButtonEventListeners)(listComments,token);\n\t\t(0,_eventlisteners_js__WEBPACK_IMPORTED_MODULE_2__.initAnswerCommentEventListener)(listComments);\n}\n\n\n//Рендер формы добавления комменатриев\nfunction renderAddForm(formBlock, token) {\n\tconst addFormHtml = `\n\t\t<div class=\"add-form\">\n\t\t\t<input type=\"text\" class=\"add-form-name\" placeholder=\"Введите ваше имя\" />\n\t\t\t<textarea type=\"textarea\" class=\"add-form-text\" placeholder=\"Введите ваш коментарий\" rows=\"4\"></textarea>\n\t\t\t<div class=\"add-form-row\">\n\t\t\t\t<button class='add-form-cancel-button'>Выйти</button>\n\t\t\t\t<button class=\"add-form-button button-disabled \">Написать</button>\n\t\t</div>\n\t`\n\tformBlock.innerHTML = addFormHtml;\n\n\tconst formButton = formBlock.querySelector('.add-form-button');\n\tconst inputComment = formBlock.querySelector('.add-form-text');\n\tconst inputName = formBlock.querySelector('.add-form-name');\n\tconst cancelButton = formBlock.querySelector('.add-form-cancel-button');\n\n\t// Подписка на событие клика по кнопке \"Написать\"\n\tformButton.addEventListener('click', () => {\n\t\tlet inputNameValue = inputName.value;\n\t\tlet inputCommentValue = inputComment.value;\n\n\t\thideError();\n\t\tif (!isValid(inputNameValue, inputCommentValue)) {\n\t\t\tshowError(formBlock);\n\t\t\treturn;\n\t\t}\n\n\t\tlet newComment = {\n\t\t\ttext: inputComment.value.\n\t\t\t\treplaceAll(\"<\", \"&lt;\").\n\t\t\t\treplaceAll(\">\", \"&gt;\").\n\t\t\t\treplaceAll(\"/**\", \"<div class='quote'>\").\n\t\t\t\treplaceAll(\"**/\", \"</div>\"),\n\t\t}\n\n\t\t;(0,_script_js__WEBPACK_IMPORTED_MODULE_0__.fetchPostandRender)(newComment, token);\n\n\t\t(0,_handlerLoading_js__WEBPACK_IMPORTED_MODULE_1__.renderLoading)();\n\t\tinputComment.value = '';\n\t});\n\n\t//Подписка на активность/неактивность кнопки \"Написать\"\n\tformBlock.addEventListener('input', () => {\n\t\tif (inputName.value && inputComment.value) {\n\t\t\tformButton.disabled = false;\n\t\t\tformButton.classList.remove('button-disabled')\n\t\t} else {\n\t\t\tformButton.disabled = true;\n\t\t\tformButton.classList.add('button-disabled')\n\t\t}\n\t})\n\n\t//Подписка на кнопку Выйти из авторизации\n\tcancelButton.addEventListener('click',() => {\n\t\tlocalStorage.clear();\n\t\t(0,_script_js__WEBPACK_IMPORTED_MODULE_0__.renderApp)();\n\t})\n}\n\n\n\n//# sourceURL=webpack://webdev-dom-homework/./handlerComments.js?");

/***/ }),

/***/ "./handlerLoading.js":
/*!***************************!*\
  !*** ./handlerLoading.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removerLoading: () => (/* binding */ removerLoading),\n/* harmony export */   renderLoading: () => (/* binding */ renderLoading)\n/* harmony export */ });\n/* harmony import */ var _variables_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variables.js */ \"./variables.js\");\n\n\n//Рендер загрузки\nfunction renderLoading() {\n\t_variables_js__WEBPACK_IMPORTED_MODULE_0__.formBlock.classList.add('hidden');\n\t_variables_js__WEBPACK_IMPORTED_MODULE_0__.loading.classList.remove('hidden');\n}\n\n//Убрать загрузку\nfunction removerLoading() {\n\t_variables_js__WEBPACK_IMPORTED_MODULE_0__.formBlock.classList.remove('hidden');\n\t_variables_js__WEBPACK_IMPORTED_MODULE_0__.loading.classList.add('hidden');\n}\n\n\n//# sourceURL=webpack://webdev-dom-homework/./handlerLoading.js?");

/***/ }),

/***/ "./login-component.js":
/*!****************************!*\
  !*** ./login-component.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLocalStorage: () => (/* binding */ getLocalStorage),\n/* harmony export */   renderEnterForm: () => (/* binding */ renderEnterForm),\n/* harmony export */   renderLoginComponent: () => (/* binding */ renderLoginComponent),\n/* harmony export */   setLocalStorage: () => (/* binding */ setLocalStorage)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api.js */ \"./api.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./script.js */ \"./script.js\");\n/* harmony import */ var _handlerComments_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./handlerComments.js */ \"./handlerComments.js\");\n/* harmony import */ var _register_component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./register-component.js */ \"./register-component.js\");\n\r\n\r\n\r\n\r\n\r\nconst renderLoginComponent = ({ listComments, formBlock, setToken, fetchCommentsAndRenderAuthoriz }) => {\r\n\t(0,_script_js__WEBPACK_IMPORTED_MODULE_1__.fetchCommentsAndRender)(listComments);\r\n\r\n\tconst initialHtml = `\r\n\tЧтобы добавить комментарий <span class=\"autorization-button\">авторизуйтесь</span>\r\n\t`;\r\n\r\n\tformBlock.innerHTML = initialHtml;\r\n\r\n\tconst autorizationButton = document.querySelector('.autorization-button');\r\n\r\n\tautorizationButton.addEventListener('click', () => {\r\n\t\tlistComments.classList.add('hidden');\r\n\t\trenderEnterForm({listComments,formBlock,setToken,fetchCommentsAndRenderAuthoriz})\r\n\t})\r\n}\r\n\r\n//Рендер формы входа\r\nconst renderEnterForm = ({ listComments, formBlock, setToken, fetchCommentsAndRenderAuthoriz }) => {\r\n\t\r\n\r\n\t\tconst enterFormHtml = `\r\n\t\t<div class=\"enter-form\">\r\n\t\t\t<h2 class=\"enter-title\">Форма входа</h2>\r\n\t\t\t<input type=\"text\" class=\"enter-form-login\" placeholder=\"Введите ваш логин\" />\r\n\t\t\t<input type=\"password\" class=\"enter-form-password\" placeholder=\"Введите ваш пароль\" />\r\n\t\t\t<div class=\"enter-form-row\">\r\n\t\t\t\t<button class=\"enter-form-button\">Войти</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"enter-form-row\">\r\n\t\t\t\t<p class=\"reg-button\">Зарегистрироваться</p>\r\n\t\t\t\t<p class=\"cancel-button\">Вернуться к просмотру комментариев</p>\r\n\t\t\t</div\r\n\t\t</div>\r\n\t`\r\n\r\n\t\tformBlock.innerHTML = enterFormHtml;\r\n\r\n\t\tconst regButton = document.querySelector('.reg-button');\r\n\t\tconst cancelButton = document.querySelector('.cancel-button');\r\n\t\tconst enterButton = document.querySelector('.enter-form-button');\r\n\r\n\t\tregButton.addEventListener('click', () => {\r\n\t\t\t(0,_register_component_js__WEBPACK_IMPORTED_MODULE_3__.renderRegisterComponent)(formBlock, listComments, setToken);\r\n\t\t})\r\n\r\n\t\tcancelButton.addEventListener('click', () => {\r\n\t\t\tlistComments.classList.remove('hidden');\r\n\t\t\trenderLoginComponent({ listComments, formBlock, setToken, fetchCommentsAndRenderAuthoriz })\r\n\t\t})\r\n\r\n\t\tenterButton.addEventListener('click', () => {\r\n\t\t\tconst login = document.querySelector('.enter-form-login').value;\r\n\t\t\tconst password = document.querySelector('.enter-form-password').value;\r\n\r\n\t\t\tif (!login) {\r\n\t\t\t\talert('Введите логин');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!password) {\r\n\t\t\t\talert('Введите пароль');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t(0,_api_js__WEBPACK_IMPORTED_MODULE_0__.loginUser)({\r\n\t\t\t\tlogin: login,\r\n\t\t\t\tpassword: password\r\n\t\t\t})\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tlistComments.classList.remove('hidden');\r\n\t\t\t\t\tsetToken(`Bearer ${user.user.token}`);\r\n\t\t\t\t\tfetchCommentsAndRenderAuthoriz(listComments);\r\n\t\t\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_2__.renderAddForm)(formBlock, `Bearer ${user.user.token}`);\r\n\t\t\t\t\tsetLocalStorage (login,password,`Bearer ${user.user.token}`,user.user.name);\r\n\t\t\t\t\tconst inputName = document.querySelector('.add-form-name');\r\n\t\t\t\t\tinputName.value = user.user.name\r\n\t\t\t\t\tinputName.disabled = true;\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\talert(error.message);\r\n\t\t\t\t})\r\n\t\t})\t\r\n}\r\n\r\nconst setLocalStorage = (login,password,token,userName) => {\r\n\tlocalStorage.setItem('login', login);\r\n\tlocalStorage.setItem('password', password);\r\n\tlocalStorage.setItem('token',token);\r\n\tlocalStorage.setItem('userName',userName);\r\n\r\n}\r\n\r\nconst getLocalStorage = () => {\r\n\tconst authoriz = {};\r\n\tconst login = localStorage.getItem('login');\r\n\tconst password = localStorage.getItem('password');\r\n\tconst token = localStorage.getItem('token');\r\n\tconst userName = localStorage.getItem('userName');\r\n\tauthoriz.login = login;\r\n\tauthoriz.password = password;\r\n\tauthoriz.token = token;\r\n\tauthoriz.userName = userName;\r\n\treturn authoriz;\r\n}\n\n//# sourceURL=webpack://webdev-dom-homework/./login-component.js?");

/***/ }),

/***/ "./register-component.js":
/*!*******************************!*\
  !*** ./register-component.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderRegisterComponent: () => (/* binding */ renderRegisterComponent)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api.js */ \"./api.js\");\n/* harmony import */ var _login_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./login-component.js */ \"./login-component.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script.js */ \"./script.js\");\n/* harmony import */ var _handlerComments_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handlerComments.js */ \"./handlerComments.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n//Рендер формы регистрации\r\nfunction renderRegisterComponent(formBlock, listComments, setToken) {\r\n\t\r\n\tconst registerFormHtml = `\r\n\t\t<div class=\"enter-form\">\r\n\t\t\t<h2 class=\"enter-title\">Форма регистрации</h2>\r\n\t\t\t<input type=\"text\" class=\"enter-form-name\" placeholder=\"Введите ваше имя\" />\r\n\t\t\t<input type=\"text\" class=\"enter-form-login\" placeholder=\"Введите ваш логин\" />\r\n\t\t\t<input type=\"password\" class=\"enter-form-password\" placeholder=\"Введите ваш пароль\" />\r\n\t\t\t<div class=\"enter-form-row\">\r\n\t\t\t\t<button class=\"register-form-button\">Зарегистрироваться</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"enter-form-row\">\r\n\t\t\t<p class=\"reg-button-auth\">Войти как авторизованный пользователь</p>\r\n\t\t\t<p class=\"cancel-button\">Вернуться к просмотру комментариев</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`\r\n\r\n\tformBlock.innerHTML = registerFormHtml;\r\n\r\n\tconst regButtonAuth = document.querySelector('.reg-button-auth');\r\n\tconst registerButton = document.querySelector('.register-form-button');\r\n\tconst cancelButton = document.querySelector('.cancel-button');\r\n\r\n\tcancelButton.addEventListener('click', () => {\r\n\t\tlistComments.classList.remove('hidden');\r\n\t\t(0,_login_component_js__WEBPACK_IMPORTED_MODULE_1__.renderLoginComponent)({ listComments, formBlock, setToken, fetchCommentsAndRenderAuthoriz: _script_js__WEBPACK_IMPORTED_MODULE_2__.fetchCommentsAndRenderAuthoriz })\r\n\t})\r\n\r\n\tregButtonAuth.addEventListener('click', () => {\r\n\t\t;(0,_login_component_js__WEBPACK_IMPORTED_MODULE_1__.renderEnterForm)({ listComments, formBlock, setToken, fetchCommentsAndRenderAuthoriz: _script_js__WEBPACK_IMPORTED_MODULE_2__.fetchCommentsAndRenderAuthoriz })\r\n\t})\r\n\r\n\tregisterButton.addEventListener('click', () => {\r\n\t\tconst name = formBlock.querySelector('.enter-form-name').value;\r\n\t\tconst login = formBlock.querySelector('.enter-form-login').value;\r\n\t\tconst password = formBlock.querySelector('.enter-form-password').value;\r\n\r\n\t\t(0,_api_js__WEBPACK_IMPORTED_MODULE_0__.registerUser)({\r\n\t\t\tlogin: login,\r\n\t\t\tpassword: password,\r\n\t\t\tname: name,\r\n\t\t})\r\n\t\t\t.then((user) => {\r\n\t\t\t\tlistComments.classList.remove('hidden');\r\n\t\t\t\tsetToken(`Bearer ${user.user.token}`);\r\n\t\t\t\t(0,_script_js__WEBPACK_IMPORTED_MODULE_2__.fetchCommentsAndRenderAuthoriz)(listComments);\r\n\t\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_3__.renderAddForm)(formBlock, `Bearer ${user.user.token}`);\r\n\t\t\t\t(0,_login_component_js__WEBPACK_IMPORTED_MODULE_1__.setLocalStorage) (login,password,`Bearer ${user.user.token}`,user.user.name);\r\n\t\t\t\tconst inputName = document.querySelector('.add-form-name');\r\n\t\t\t\tinputName.value = user.user.name\r\n\t\t\t\tinputName.disabled = true;\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\talert(error.message);\r\n\t\t\t})\r\n\t})\r\n}\r\n\n\n//# sourceURL=webpack://webdev-dom-homework/./register-component.js?");

/***/ }),

/***/ "./script.js":
/*!*******************!*\
  !*** ./script.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comments: () => (/* binding */ comments),\n/* harmony export */   fetchCommentsAndRender: () => (/* binding */ fetchCommentsAndRender),\n/* harmony export */   fetchCommentsAndRenderAuthoriz: () => (/* binding */ fetchCommentsAndRenderAuthoriz),\n/* harmony export */   fetchPostandRender: () => (/* binding */ fetchPostandRender),\n/* harmony export */   renderApp: () => (/* binding */ renderApp)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api.js */ \"./api.js\");\n/* harmony import */ var _handlerComments_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handlerComments.js */ \"./handlerComments.js\");\n/* harmony import */ var _handlerLoading_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./handlerLoading.js */ \"./handlerLoading.js\");\n/* harmony import */ var _login_component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./login-component.js */ \"./login-component.js\");\n\n\n\n\n\n\nlet comments = [];\n\nlet token = null;\n\n\n\n\nconst fetchCommentsAndRender = (listComments) => {\n\treturn (0,_api_js__WEBPACK_IMPORTED_MODULE_0__.fetchGet)()\n\t\t.then(responseData => {\n\t\t\tlet appcomments = responseData.comments.map((comment) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: comment.id,\t\t\t\t\t\n\t\t\t\t\tname: comment.author.name,\n\t\t\t\t\tdate: (0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderDate)(comment.date),\n\t\t\t\t\ttext: comment.text,\n\t\t\t\t\tlikes: comment.likes,\n\t\t\t\t\tisLiked: comment.isLiked,\n\t\t\t\t\tforceError: true\n\t\t\t\t}\n\t\t\t})\n\t\t\tcomments = appcomments;\n\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderComments)(listComments);\n\t\t\t(0,_handlerLoading_js__WEBPACK_IMPORTED_MODULE_2__.removerLoading)();\n\t\t})\n\t\t.catch(error => {\n\t\t\tif (error.message === 'Сервер сломался') {\n\t\t\t\tfetchCommentsAndRender(listComments);\n\t\t\t}\n\t\t\tconsole.log(error);\n\t\t\talert('Кажется, у вас сломался интернет, попробуйте позже')\n\t\t})\n}\n\nconst fetchCommentsAndRenderAuthoriz = (listComments) => {\n\treturn (0,_api_js__WEBPACK_IMPORTED_MODULE_0__.fetchGetAuthoriz)(token)\n\t\t.then(responseData => {\n\t\t\tlet appcomments = responseData.comments.map((comment) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: comment.id,\n\t\t\t\t\tname: comment.author.name,\n\t\t\t\t\tdate: (0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderDate)(comment.date),\n\t\t\t\t\ttext: comment.text,\n\t\t\t\t\tlikes: comment.likes,\n\t\t\t\t\tisLiked: comment.isLiked,\n\t\t\t\t\tforceError: true\n\t\t\t\t}\n\t\t\t})\n\t\t\tcomments = appcomments;\n\t\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderCommentsAuthoriz)(listComments,token)\n\t\t\t;(0,_handlerLoading_js__WEBPACK_IMPORTED_MODULE_2__.removerLoading)();\n\t\t\t})\n\t\t.catch(error => {\n\t\t\tif (error.message === 'Сервер сломался') {\n\t\t\t\tfetchCommentsAndRenderAuthoriz(listComments);\n\t\t\t}\n\t\t\tconsole.log(error);\n\t\t\talert('Кажется, у вас сломался интернет, попробуйте позже')\n\t\t})\n}\n\nfunction fetchPostandRender(newComment, token) {\n\treturn (0,_api_js__WEBPACK_IMPORTED_MODULE_0__.fetchPost)(newComment, token)\n\t\t.then(responseData => {\n\t\t\tconst listComments = document.querySelector('.comments');\n\t\t\tfetchCommentsAndRenderAuthoriz(listComments);\n\t\t})\n\t\t.catch(error => {\n\t\t\t(0,_handlerLoading_js__WEBPACK_IMPORTED_MODULE_2__.removerLoading)();\n\t\t\t// inputComment.value = inputCommentValue;\n\t\t\tif (error.message === 'Плохой запрос') {\n\t\t\t\talert('Имя и комментарий должны быть не менее 3х символов');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (error.message === 'Сервер сломался') {\n\t\t\t\tfetchPostandRender(newComment, token);\n\t\t\t} else {\n\t\t\t\talert(error.message)\n\t\t\t}\n\t\t});\n}\n\nconst renderApp = () => {\n\tconst listComments = document.querySelector('.comments');\n\tconst formBlock = document.querySelector('.form');\n\tlistComments.textContent = 'Подождите, пожалуйста, комментарии загружаются...';\n\n\tif (!(0,_login_component_js__WEBPACK_IMPORTED_MODULE_3__.getLocalStorage)().token) {\n\t\t(0,_login_component_js__WEBPACK_IMPORTED_MODULE_3__.renderLoginComponent)({\n\t\t\tlistComments,\n\t\t\tformBlock,\n\t\t\tsetToken: (newToken) => {\n\t\t\t\ttoken = newToken;\n\t\t\t},\n\t\t\tfetchCommentsAndRenderAuthoriz\n\t\t})\n\t} else {\n\t\tfetchCommentsAndRenderAuthoriz(listComments);\n\t\ttoken = (0,_login_component_js__WEBPACK_IMPORTED_MODULE_3__.getLocalStorage)().token;\n\t\t(0,_handlerComments_js__WEBPACK_IMPORTED_MODULE_1__.renderAddForm)(formBlock,token);\n\t\tconst inputName = document.querySelector('.add-form-name');\n\t\tinputName.value = (0,_login_component_js__WEBPACK_IMPORTED_MODULE_3__.getLocalStorage)().userName;\n\t\tinputName.disabled = true;\n\t}\n}\n\nrenderApp();\n\n//Подписка на создание комментария нажатием клавиши Enter\n// form.addEventListener('keyup', (event) => {\n// \tif (event.key === 'Enter') {\n// \t\thandlerAddComment();\n// \t}\n// });\n\n\n\n\n//# sourceURL=webpack://webdev-dom-homework/./script.js?");

/***/ }),

/***/ "./variables.js":
/*!**********************!*\
  !*** ./variables.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   autorizationButton: () => (/* binding */ autorizationButton),\n/* harmony export */   formBlock: () => (/* binding */ formBlock),\n/* harmony export */   listComments: () => (/* binding */ listComments),\n/* harmony export */   loading: () => (/* binding */ loading)\n/* harmony export */ });\n// export const form = document.querySelector('.add-form');\nconst formBlock = document.querySelector('.form');\nconst listComments = document.querySelector('.comments');\nconst loading = document.querySelector('.load');\n// export const inputComment = form.querySelector('.add-form-text');\n// export const inputName = form.querySelector('.add-form-name');\n// export const formButton = form.querySelector('.add-form-button');\nconst autorizationButton = document.querySelector('.autorization-button');\n\n\n\n\n//# sourceURL=webpack://webdev-dom-homework/./variables.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./script.js");
/******/ 	
/******/ })()
;